define("assignsubmission_reflection/reflectionForm",["exports","core/fragment","core/templates","core/ajax","jquery"],(function(_exports,_fragment,_templates,_ajax,_jquery){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_fragment=_interopRequireDefault(_fragment),_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax),_jquery=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var handleFormSubmissionResponse=function(){Y.use("moodle-core-formchangechecker",(function(){M.core_formchangechecker.reset_form_dirty_state()})),console.log("handleFormSubmissionResponse")},handleFormSubmissionFailure=function(data){console.log("ERROR")},submitFormAjax=function(e){e.preventDefault(),console.log("submitFormAjax"),document.createEvent("HTMLEvents").initEvent("change",!0,!0);var formData=(0,_jquery.default)(document.querySelector(".reflection-form-container form")).serialize();console.log(formData);var contextid=document.querySelector(".reflection-form-container").getAttribute("data-contextid");_ajax.default.call([{methodname:"assignsubmission_reflection_reflection_form",args:{contextid:contextid,jsonformdata:JSON.stringify(formData)},done:handleFormSubmissionResponse.bind(undefined,formData),fail:handleFormSubmissionFailure.bind(undefined,formData)}])};_exports.init=function(undefined$1,contextid){!function(formdata,contextid){console.log("LOAD FORM"),void 0===formdata&&(formdata={});var params={jsonformdata:JSON.stringify(formdata)};console.log(contextid),_fragment.default.loadFragment("assignsubmission_reflection","reflectionpanel",contextid,params).done((function(html,js){(0,_jquery.default)(document.querySelector(".reflection-form-container")).fadeOut("fast",(function(){_templates.default.replaceNodeContents((0,_jquery.default)(document.querySelector(".reflection-form-container")),html,js),(0,_jquery.default)(document.querySelector(".reflection-form-container")).fadeIn("fast"),console.log((0,_jquery.default)(document.querySelector(".reflection-form-container form"))),(0,_jquery.default)(document.querySelector(".reflection-form-container form  #id_submitbutton")).on("click",submitFormAjax.bind(this)),document.getElementById("id_itemid").value=document.querySelector(".reflection-form-container").getAttribute("data-itemid")}))}))}("",contextid)}}));

//# sourceMappingURL=reflectionForm.min.js.map