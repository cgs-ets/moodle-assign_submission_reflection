define("assignsubmission_reflection/reflectionForm",["exports","core/fragment","core/templates","core/ajax","jquery"],(function(_exports,_fragment,_templates,_ajax,_jquery){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_fragment=_interopRequireDefault(_fragment),_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax),_jquery=_interopRequireDefault(_jquery);var submitFormAjax=function(e){e.preventDefault();var formData=(0,_jquery.default)(document.querySelector(".reflection-form-container form")).serialize(),contextid=document.querySelector(".reflection-form-container").getAttribute("data-contextid");_ajax.default.call([{methodname:"assignsubmission_reflection_reflection_form",args:{contextid:contextid,jsonformdata:JSON.stringify(formData)},done:function(response){switch(console.log(response),response){case"FAIL":if(null==document.querySelector(".cgs-reflection-fail-alert")){(0,_jquery.default)(document.querySelector(".reflection-form-container form")).after("<div class='alert alert-danger cgs-reflection-alert cgs-reflection-fail-alert' role='alert'>There was a problem when saving the reflection. Please try again later</div>")}break;case"EMPTY":if(null==document.querySelector(".cgs-reflection-empty-alert")){(0,_jquery.default)(document.querySelector(".reflection-form-container form")).after("<div class='alert alert-danger cgs-reflection-alert cgs-reflection-empty-alert' role='alert'>The reflection cannot be empty</div>")}break;default:(0,_jquery.default)(document.querySelector(".reflection-form-container")).fadeOut("fast",(function(){(0,_jquery.default)(document.querySelector(".reflection-form-container")).replaceWith(response),(0,_jquery.default)(document.querySelector(".reflection-form-container")).fadeIn("fast")}))}},fail:function(reason){console.log(reason)}}])};_exports.init=function(undefined$1,contextid){!function(formdata,contextid){void 0===formdata&&(formdata={});var params={jsonformdata:JSON.stringify(formdata)};_fragment.default.loadFragment("assignsubmission_reflection","reflectionpanel",contextid,params).done((function(html,js){(0,_jquery.default)(document.querySelector(".reflection-form-container")).fadeOut("fast",(function(){_templates.default.replaceNodeContents((0,_jquery.default)(document.querySelector(".reflection-form-container")),html,js),(0,_jquery.default)(document.querySelector(".reflection-form-container")).fadeIn("fast"),(0,_jquery.default)(document.querySelector(".reflection-form-container form  #id_submitbutton")).on("click",submitFormAjax.bind(this)),document.getElementById("id_submission").value=document.querySelector(".reflection-form-container").getAttribute("data-itemid"),document.getElementById("id_assignment").value=document.querySelector(".reflection-form-container").getAttribute("data-assignment")}))}))}("",contextid)}}));

//# sourceMappingURL=reflectionForm.min.js.map